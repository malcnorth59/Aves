digraph vintage_computer {
    // Graph settings
    rankdir=LR;
    
    // Main CPU
    CPU [label="R65C02\nCPU\n4MHz", shape=box, style=filled, fillcolor=lightblue];
    
    // Memory components
    RAM [label="RAM\n128K\n($0000-$7FFF)\n($8000-$FFFF)\nBanked", shape=box, style=filled, fillcolor=lightgray];
    EPROM [label="FLASH\n128K\n($8000-$FFFF)\nBanked", shape=box, style=filled, fillcolor=lightgray];
    
    // I/O components
    MC [label="Memory Control\nRegister\n($FE00)", shape=box, style=filled, fillcolor=lightgray];
    VIA [label="W65C22\nVIA\n($FE20-$FE2F)", shape=box, style=filled, fillcolor=lightgray];
    PS2 [label="PS/2\nKeyboard\n($FE40-$FE41)", shape=box, style=filled, fillcolor=lightgray];
    CRTC [label="MC6845\nCRTC\n($FE80-$FE81)", shape=box, style=filled, fillcolor=lightgray];
    
    // Video components
    DualPortRAM [label="Dual Port RAM\n4K\nVideo Buffer\nBanked", shape=box, style=filled, fillcolor=lightgray];
    DisplayOut [label="Display\nOutput", shape=oval];
    
    // Bus connections
    edge [color=red, label="8-bit data bus"];
    CPU -> {RAM EPROM MC VIA PS2 CRTC DualPortRAM};
    
    // Address bus
    edge [color=blue, style=dashed, label="16-bit address bus"];
    CPU -> {RAM EPROM MC VIA PS2 CRTC DualPortRAM};
    
    // Video connection
    edge [color=green];
    CRTC -> DisplayOut [label="Sync"];
    
    // Bank select
    edge [color=purple, style=dotted, label="control"];
    MC -> RAM [label="Bank Select"];
    MC -> EPROM [label="Bank Select"];
    MC -> DualPortRAM [label="Bank Select"];
    
    // Component positioning
    {rank=same; RAM EPROM}
    {rank=same; MC VIA PS2 CRTC}
    {rank=same; DualPortRAM DisplayOut}
}
